{"ast":null,"code":"// you can import css in your js file!\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css'; // If you want to use jquery\n\nimport $ from 'jquery';\nimport './gift.js';\n\nconst axios = require('axios'); // TODO\n\n\nlet sled = [];\nlet isworking = false;\nlet isdelivering = false;\n$(document).ready(function () {\n  $('#Small').click(function () {\n    const smallGift = giftFactory(\"Small\");\n    giftHandler(smallGift);\n  });\n  $('#Normal').click(function () {\n    const normalGift = giftFactory(\"Normal\");\n    giftHandler(normalGift);\n  });\n  $('#Big').click(function () {\n    const bigGift = giftFactory(\"Big\");\n    giftHandler(bigGift);\n  });\n  $('#Deliver').click(function () {\n    deliver();\n  });\n});\n\nasync function giftHandler(gift) {\n  if (!isworking) {\n    if (!isdelivering) {\n      try {\n        $('#Result').html(\"in work\");\n        isworking = true;\n        await gift.prepareGift();\n        $('#Result').html(addGift(gift));\n        $('#Sled').html(displaySled());\n      } catch (err) {\n        return err;\n      }\n    } else {\n      $('#Result').html('Dwarf says : the sled is not here, so why would I bother?!');\n    }\n  } else {\n    $('#Result').html(\"dwarf is busy\");\n  }\n}\n\nfunction displaySled() {\n  let str = \"\";\n\n  for (let i = 0; i < sled.length; i++) {\n    str += \"<li> Gift \" + (i + 1) + \" : \" + sled[i].constructor.name + \"</li>\";\n  }\n\n  return str;\n}\n\nfunction addGift(gift) {\n  let sum = 0;\n\n  for (let i = 0; i < sled.length; i++) {\n    sum += sled[i].weight;\n  }\n\n  sum += gift.weight;\n\n  if (sum <= 12) {\n    sled.push(gift);\n    return \"ok\";\n  } else {\n    return \"it's to heavy, I cannot add this gift to the sled\";\n  }\n}\n\nfunction deliver() {\n  if (!isdelivering) {\n    if (sled.length > 0) {\n      isdelivering = true;\n      axios.post('http://localhost:8081', {\n        gifts: sled\n      }).then(function () {\n        sled = [];\n        $('#Sled').html(\"\");\n        $('#Result').html(\"Gifts have been delivered\");\n        isdelivering = false;\n      }).catch(function () {\n        isdelivering = false;\n        $('#Result').html(\"These stupids reindeers are hungry, try again !\");\n      });\n    } else {\n      $('#Result').html(\"Sled empty\");\n    }\n  } else {\n    $('#Result').html(\"Reindeers are delivering !\");\n  }\n}","map":{"version":3,"sources":["/Users/antoinemassy/Desktop/A3/TechnoWebAdv/lab3/website/src/index.js"],"names":["$","axios","require","sled","isworking","isdelivering","document","ready","click","smallGift","giftFactory","giftHandler","normalGift","bigGift","deliver","gift","html","prepareGift","addGift","displaySled","err","str","i","length","constructor","name","sum","weight","push","post","gifts","then","catch"],"mappings":"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","sourcesContent":["// you can import css in your js file!\nimport 'bootstrap/dist/css/bootstrap.css'\nimport './index.css'\n// If you want to use jquery\nimport $ from 'jquery'\nimport './gift.js'\nconst axios = require('axios');\n\n// TODO\nlet sled = []\nlet isworking = false;\nlet isdelivering = false;\n\n$(document).ready(function () {\n    $('#Small').click(function () {\n        const smallGift = giftFactory(\"Small\")\n        giftHandler(smallGift)\n    });\n\n    $('#Normal').click(function () {\n        const normalGift = giftFactory(\"Normal\")\n        giftHandler(normalGift)\n    });\n\n\n    $('#Big').click(function () {\n        const bigGift = giftFactory(\"Big\")\n        giftHandler(bigGift)\n    });\n\n    $('#Deliver').click(function () {\n        deliver()\n    });\n});\n\nasync function giftHandler(gift) {\n    if (!isworking) {\n        if (!isdelivering) {\n            try {\n                $('#Result').html(\"in work\")\n                isworking = true\n                await gift.prepareGift()\n                $('#Result').html(addGift(gift));\n                $('#Sled').html(displaySled())\n            } catch (err) {\n                return err\n            }\n        } else {\n            $('#Result').html('Dwarf says : the sled is not here, so why would I bother?!')\n        }\n    } else {\n        $('#Result').html(\"dwarf is busy\")\n    }\n}\n\nfunction displaySled() {\n    let str = \"\"\n    for (let i = 0; i < sled.length; i++) {\n        str += \"<li> Gift \" + (i + 1) + \" : \" + sled[i].constructor.name + \"</li>\"\n    }\n    return str\n}\n\nfunction addGift(gift) {\n    let sum = 0\n    for (let i = 0; i < sled.length; i++) {\n        sum += sled[i].weight\n    }\n    sum += gift.weight\n    if (sum <= 12) {\n        sled.push(gift)\n        return \"ok\"\n    } else {\n        return \"it's to heavy, I cannot add this gift to the sled\"\n    }\n}\n\nfunction deliver() {\n    if (!isdelivering) {\n        if (sled.length > 0) {\n            isdelivering = true;\n            axios.post('http://localhost:8081', {\n                    gifts: sled\n                })\n                .then(function () {\n                    sled = []\n                    $('#Sled').html(\"\")\n                    $('#Result').html(\"Gifts have been delivered\")\n                    isdelivering = false;\n                })\n                .catch(function () {\n                    isdelivering = false;\n                    $('#Result').html(\"These stupids reindeers are hungry, try again !\")\n                });\n        } else {\n            $('#Result').html(\"Sled empty\")\n        }\n    } else {\n        $('#Result').html(\"Reindeers are delivering !\")\n    }\n}\n\n\n\n"]},"metadata":{},"sourceType":"module"}