{"ast":null,"code":"// you can import css in your js file!\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css'; // If you want to use jquery\n\nimport $ from 'jquery';\n\nconst axios = require('axios'); // TODO\n\n\nlet sled = [];\nlet isworking = false;\nlet isdelivering = false;\n$(document).ready(function () {\n  $('#Small').click(function () {\n    const smallGift = giftFactory(\"Small\");\n    giftHandler(smallGift);\n  });\n  $('#Normal').click(function () {\n    const normalGift = giftFactory(\"Normal\");\n    giftHandler(normalGift);\n  });\n  $('#Big').click(function () {\n    const bigGift = giftFactory(\"Big\");\n    giftHandler(bigGift);\n  });\n  $('#Deliver').click(function () {\n    deliver();\n  });\n});\n\nasync function giftHandler(gift) {\n  if (!isworking) {\n    if (!isdelivering) {\n      try {\n        $('#Result').html(\"in work\");\n        isworking = true;\n        await gift.prepareGift();\n        $('#Result').html(addGift(gift));\n        $('#Sled').html(displaySled());\n      } catch (err) {\n        return err;\n      }\n    } else {\n      $('#Result').html('Dwarf says : the sled is not here, so why would I bother?!');\n    }\n  } else {\n    $('#Result').html(\"dwarf is busy\");\n  }\n}\n\nclass GiftsFactory {\n  constructor() {\n    this.dwarf = new Dwarf();\n    this.sled = new Sled();\n  }\n\n}\n\nclass Dwarf {\n  constructor() {\n    isWorking = false;\n  }\n\n  prepareGift(gift) {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        isWorking = false;\n        resolve(\"ok\");\n      }, gift.preparation_time * 1000);\n    });\n  }\n\n  addGift(sled, gift) {\n    sled.push(gift);\n  }\n\n}\n\nclass Sled {\n  constructor() {\n    this.gifts = [];\n  }\n\n  isTooHeavy(gift) {\n    let sum = 0;\n\n    for (let i = 0; i < this.gifts.length; i++) {\n      sum += this.gifts[i].weight;\n    }\n\n    sum += gift.weight;\n\n    if (sum <= 12) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  displaySled() {\n    let str = \"\";\n\n    for (let i = 0; i < sled.length; i++) {\n      str += \"<li> Gift \" + (i + 1) + \" : \" + sled[i].constructor.name + \"</li>\";\n    }\n\n    return str;\n  }\n\n  deliver() {\n    if (!isdelivering) {\n      if (this.gifts.length > 0) {\n        isdelivering = true;\n        axios.post('http://localhost:8081', {\n          gifts: this.gifts\n        }).then(function () {\n          this.gifts = [];\n          $('#Sled').html(\"\");\n          $('#Result').html(\"Gifts have been delivered\");\n          isdelivering = false;\n        }).catch(function () {\n          isdelivering = false;\n          $('#Result').html(\"These stupids reindeers are hungry, try again !\");\n        });\n      } else {\n        $('#Result').html(\"Sled empty\");\n      }\n    } else {\n      $('#Result').html(\"Reindeers are delivering !\");\n    }\n  }\n\n}\n\nclass Gift {\n  constructor(weight, preparation_time) {\n    this.weight = weight;\n    this.preparation_time = preparation_time;\n  }\n\n}\n\nclass SmallGift extends Gift {\n  constructor() {\n    super(1, 0.5);\n  }\n\n}\n\nclass NormalGift extends Gift {\n  constructor() {\n    super(2, 1);\n  }\n\n}\n\nclass BigGift extends Gift {\n  constructor() {\n    super(5, 2);\n  }\n\n}\n\nconst giftFactory = type => {\n  switch (type) {\n    case \"Small\":\n      return new SmallGift();\n\n    case \"Normal\":\n      return new NormalGift();\n\n    case \"Big\":\n      return new BigGift();\n\n    default:\n      return null;\n  }\n};","map":{"version":3,"sources":["/Users/antoinemassy/Desktop/A3/TechnoWebAdv/lab3/website/src/index.js"],"names":["$","axios","require","sled","isworking","isdelivering","document","ready","click","smallGift","giftFactory","giftHandler","normalGift","bigGift","deliver","gift","html","prepareGift","addGift","displaySled","err","GiftsFactory","constructor","dwarf","Dwarf","Sled","isWorking","Promise","resolve","reject","setTimeout","preparation_time","push","gifts","isTooHeavy","sum","i","length","weight","str","name","post","then","catch","Gift","SmallGift","NormalGift","BigGift","type"],"mappings":"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","sourcesContent":["// you can import css in your js file!\nimport 'bootstrap/dist/css/bootstrap.css'\nimport './index.css'\n// If you want to use jquery\nimport $ from 'jquery'\nconst axios = require('axios');\n\n// TODO\nlet sled = []\nlet isworking = false;\nlet isdelivering = false;\n\n$(document).ready(function () {\n    $('#Small').click(function () {\n        const smallGift = giftFactory(\"Small\")\n        giftHandler(smallGift)\n    });\n\n    $('#Normal').click(function () {\n        const normalGift = giftFactory(\"Normal\")\n        giftHandler(normalGift)\n    });\n\n\n    $('#Big').click(function () {\n        const bigGift = giftFactory(\"Big\")\n        giftHandler(bigGift)\n    });\n\n    $('#Deliver').click(function () {\n        deliver()\n    });\n});\n\nasync function giftHandler(gift) {\n    if (!isworking) {\n        if (!isdelivering) {\n            try {\n                $('#Result').html(\"in work\")\n                isworking = true\n                await gift.prepareGift()\n                $('#Result').html(addGift(gift));\n                $('#Sled').html(displaySled())\n            } catch (err) {\n                return err\n            }\n        } else {\n            $('#Result').html('Dwarf says : the sled is not here, so why would I bother?!')\n        }\n    } else {\n        $('#Result').html(\"dwarf is busy\")\n    }\n}\n\n\n\nclass GiftsFactory {\n    constructor() {\n        this.dwarf = new Dwarf();\n        this.sled = new Sled();\n    }\n}\n\nclass Dwarf {\n    constructor() {\n        isWorking = false;\n    }\n\n    prepareGift(gift) {\n        return new Promise((resolve, reject) => {\n            setTimeout(() => {\n                isWorking = false\n                resolve(\"ok\")\n            }, (gift.preparation_time * 1000))\n        })\n    }\n    addGift(sled, gift){\n        sled.push(gift)\n    }\n}\n\nclass Sled {\n    constructor() {\n        this.gifts = []\n    }\n\n    isTooHeavy(gift) {\n        let sum = 0\n        for (let i = 0; i < this.gifts.length; i++) {\n            sum += this.gifts[i].weight\n        }\n        sum += gift.weight\n        if (sum <= 12) {\n            return false\n        } else {\n            return true\n        }\n    }\n\n    displaySled() {\n        let str = \"\"\n        for (let i = 0; i < sled.length; i++) {\n            str += \"<li> Gift \" + (i + 1) + \" : \" + sled[i].constructor.name + \"</li>\"\n        }\n        return str\n    }\n\n    deliver(){\n        if (!isdelivering) {\n            if (this.gifts.length > 0) {\n                isdelivering = true;\n                axios.post('http://localhost:8081', {\n                        gifts: this.gifts\n                    })\n                    .then(function () {\n                        this.gifts = []\n                        $('#Sled').html(\"\")\n                        $('#Result').html(\"Gifts have been delivered\")\n                        isdelivering = false;\n                    })\n                    .catch(function () {\n                        isdelivering = false;\n                        $('#Result').html(\"These stupids reindeers are hungry, try again !\")\n                    });\n            } else {\n                $('#Result').html(\"Sled empty\")\n            }\n        } else {\n            $('#Result').html(\"Reindeers are delivering !\")\n        }\n    }\n}\n\nclass Gift {\n    constructor(weight, preparation_time) {\n        this.weight = weight\n        this.preparation_time = preparation_time\n    }\n}\n\nclass SmallGift extends Gift {\n    constructor() {\n        super(1, 0.5)\n    }\n}\n\nclass NormalGift extends Gift {\n    constructor() {\n        super(2, 1)\n    }\n}\n\nclass BigGift extends Gift {\n    constructor() {\n        super(5, 2)\n    }\n}\nconst giftFactory = (type) => {\n    switch (type) {\n        case \"Small\":\n            return new SmallGift();\n        case \"Normal\":\n            return new NormalGift();\n        case \"Big\":\n            return new BigGift();\n        default:\n            return null;\n    }\n}"]},"metadata":{},"sourceType":"module"}