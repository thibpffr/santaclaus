{"ast":null,"code":"// you can import css in your js file!\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css'; // If you want to use jquery\n\nimport $ from 'jquery';\n\nconst axios = require('axios'); // TODO\n\n\nlet sled = [];\nlet isworking = false;\n$(document).ready(function () {\n  $('#Small').click(async function () {\n    if (!isworking) {\n      const smallGift = giftFactory(\"Small\");\n\n      try {\n        $('#Text').html(\"in work\");\n        isworking = true;\n        await smallGift.prepareGift();\n        $('#Text').html(addGift(smallGift));\n        $('#Sled').html(displaySled());\n      } catch (err) {\n        return err;\n      }\n    } else {\n      $('#Text').html(\"dwarf is busy\");\n    }\n  });\n  $('#Normal').click(async function () {\n    if (!isworking) {\n      const normalGift = giftFactory(\"Normal\");\n\n      try {\n        $('#Text').html(\"in work\");\n        isworking = true;\n        await normalGift.prepareGift();\n        $('#Text').html(addGift(normalGift));\n        $('#Sled').html(displaySled());\n      } catch (err) {\n        return err;\n      }\n    } else {\n      $('#Text').html(\"dwarf is busy\");\n    }\n  });\n  $('#Big').click(async function () {\n    giftHandler(gift);\n  });\n  $('#Deliver').click(function () {\n    deliver();\n  });\n});\n\nasync function giftHandler(gift1) {\n  if (!isworking) {\n    const gift1 = giftFactory(\"Big\");\n\n    try {\n      $('#Text').html(\"in work\");\n      isworking = true;\n      await gift1.prepareGift();\n      $('#Text').html(addGift(gift1));\n      $('#Sled').html(displaySled());\n    } catch (err) {\n      return err;\n    }\n  } else {\n    $('#Text').html(\"dwarf is busy\");\n  }\n}\n\nfunction displaySled() {\n  let str = \"\";\n\n  for (let i = 0; i < sled.length; i++) {\n    str += \"<li> Gift \" + (i + 1) + \" : \" + sled[i].constructor.name + \"</li>\";\n  }\n\n  return str;\n}\n\nfunction addGift(gift) {\n  let sum = 0;\n\n  for (let i = 0; i < sled.length; i++) {\n    sum += sled[i].weight;\n  }\n\n  sum += gift.weight;\n\n  if (sum <= 12) {\n    sled.push(gift);\n    return \"ok\";\n  } else {\n    return \"it's to heavy\";\n  }\n}\n\nfunction deliver() {\n  if (sled.length > 0) {\n    axios.post('http://localhost:8081', {\n      gifts: sled\n    }).then(function (response) {\n      sled = [];\n      $('#Sled').html(\"\");\n      console.log(response);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  } else {\n    $('#Text').html(\"Sled empty\");\n  }\n}\n\nclass Gift {\n  constructor(weight, preparation_time) {\n    this.weight = weight;\n    this.preparation_time = preparation_time;\n  }\n\n  prepareGift() {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        isworking = false;\n        resolve(\"ok2\");\n      }, this.preparation_time * 1000);\n    });\n  }\n\n}\n\nclass SmallGift extends Gift {\n  constructor() {\n    super(1, 0.5);\n  }\n\n}\n\nclass NormalGift extends Gift {\n  constructor() {\n    super(2, 1);\n  }\n\n}\n\nclass BigGift extends Gift {\n  constructor() {\n    super(5, 2);\n  }\n\n}\n\nconst giftFactory = type => {\n  switch (type) {\n    case \"Small\":\n      return new SmallGift();\n\n    case \"Normal\":\n      return new NormalGift();\n\n    case \"Big\":\n      return new BigGift();\n\n    default:\n      return null;\n  }\n};","map":{"version":3,"sources":["/Users/antoinemassy/Desktop/A3/TechnoWebAdv/lab3/website/src/index.js"],"names":["$","axios","require","sled","isworking","document","ready","click","smallGift","giftFactory","html","prepareGift","addGift","displaySled","err","normalGift","giftHandler","gift","deliver","gift1","str","i","length","constructor","name","sum","weight","push","post","gifts","then","response","console","log","catch","error","Gift","preparation_time","Promise","resolve","reject","setTimeout","SmallGift","NormalGift","BigGift","type"],"mappings":"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","sourcesContent":["// you can import css in your js file!\nimport 'bootstrap/dist/css/bootstrap.css'\nimport './index.css'\n// If you want to use jquery\nimport $ from 'jquery'\nconst axios = require('axios');\n\n// TODO\nlet sled = []\nlet isworking = false;\n\n$(document).ready(function () {\n    $('#Small').click(async function () {\n        if (!isworking) {\n            const smallGift = giftFactory(\"Small\")\n            try {\n                $('#Text').html(\"in work\")\n                isworking = true\n                await smallGift.prepareGift()\n                $('#Text').html(addGift(smallGift));\n                $('#Sled').html(displaySled())\n            } catch (err) {\n                return err\n            }\n        }else{\n            $('#Text').html(\"dwarf is busy\")\n        }\n    });\n\n    $('#Normal').click(async function () {\n        if (!isworking) {\n            const normalGift = giftFactory(\"Normal\")\n            try {\n                $('#Text').html(\"in work\")\n                isworking = true\n                await normalGift.prepareGift()\n                $('#Text').html(addGift(normalGift));\n                $('#Sled').html(displaySled())\n            } catch (err) {\n                return err\n            }\n        }else{\n            $('#Text').html(\"dwarf is busy\")\n        }\n    });\n\n\n    $('#Big').click(async function () {\n        giftHandler(gift)\n    });\n\n    $('#Deliver').click(function () {\n        deliver()\n    });\n});\n\nasync function giftHandler(gift1){\n    if (!isworking) {\n        const gift1 = giftFactory(\"Big\")\n        try {\n            $('#Text').html(\"in work\")\n            isworking = true\n            await gift1.prepareGift()\n            $('#Text').html(addGift(gift1));\n            $('#Sled').html(displaySled())\n        } catch (err) {\n            return err\n        }\n    }else{\n        $('#Text').html(\"dwarf is busy\")\n    }\n}\n\nfunction displaySled() {\n    let str = \"\"\n    for (let i = 0; i < sled.length; i++) {\n        str += \"<li> Gift \" + (i + 1) + \" : \" + sled[i].constructor.name + \"</li>\"\n    }\n    return str\n}\n\nfunction addGift(gift) {\n    let sum = 0\n    for (let i = 0; i < sled.length; i++) {\n        sum += sled[i].weight\n    }\n    sum += gift.weight\n    if (sum <= 12) {\n        sled.push(gift)\n        return \"ok\"\n    } else {\n        return \"it's to heavy\"\n    }\n}\n\nfunction deliver() {\n    if(sled.length>0){\n    axios.post('http://localhost:8081', {\n            gifts: sled\n        })\n        .then(function (response) {\n            sled = []\n            $('#Sled').html(\"\")\n            console.log(response);\n        })\n        .catch(function (error) {\n            console.log(error);\n        });\n    }else{\n        $('#Text').html(\"Sled empty\")\n    }\n}\n\n\nclass Gift {\n    constructor(weight, preparation_time) {\n        this.weight = weight\n        this.preparation_time = preparation_time\n    }\n\n    prepareGift() {\n        return new Promise((resolve, reject) => {\n            setTimeout(() => {\n                isworking = false\n                resolve(\"ok2\")\n\n\n            }, (this.preparation_time * 1000))\n        })\n    }\n\n}\n\nclass SmallGift extends Gift {\n    constructor() {\n        super(1, 0.5)\n    }\n}\n\nclass NormalGift extends Gift {\n    constructor() {\n        super(2, 1)\n    }\n}\n\nclass BigGift extends Gift {\n    constructor() {\n        super(5, 2)\n    }\n}\n\n\nconst giftFactory = (type) => {\n    switch (type) {\n        case \"Small\":\n            return new SmallGift();\n        case \"Normal\":\n            return new NormalGift();\n        case \"Big\":\n            return new BigGift();\n        default:\n            return null;\n    }\n}"]},"metadata":{},"sourceType":"module"}