{"ast":null,"code":"// you can import css in your js file!\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css'; // If you want to use jquery\n\nimport $ from 'jquery';\n\nconst axios = require('axios'); // TODO\n\n\n$(document).ready(function () {\n  const gf = new GiftsFactory();\n  const dwarf = gf.getDwarf();\n  const sled = gf.getSled();\n  $('#Small').click(async function () {\n    try {\n      const smallGift = giftFactory(\"Small\");\n\n      if (!sled.isTooHeavy(smallGift) && !dwarf.isWorking) {\n        dwarf.isWorking = true;\n        await dwarf.prepareGift(smallGift);\n        dwarf.addGift(sled, smallGift);\n        console.log(sled);\n      }\n    } catch (err) {\n      console.log(err);\n    } //giftHandler(smallGift)}\n\n  });\n  $('#Normal').click(function () {\n    const normalGift = giftFactory(\"Normal\"); //giftHandler(normalGift)\n  });\n  $('#Big').click(function () {\n    const bigGift = giftFactory(\"Big\"); //giftHandler(bigGift)\n  });\n  $('#Deliver').click(function () {//deliver()\n  });\n}); // async function giftHandler(gift) {\n//     if (!isworking) {\n//         if (!isdelivering) {\n//             try {\n//                 $('#Result').html(\"in work\")\n//                 isworking = true\n//                 await gift.prepareGift()\n//                 $('#Result').html(addGift(gift));\n//                 $('#Sled').html(displaySled())\n//             } catch (err) {\n//                 return err\n//             }\n//         } else {\n//             $('#Result').html('Dwarf says : the sled is not here, so why would I bother?!')\n//         }\n//     } else {\n//         $('#Result').html(\"dwarf is busy\")\n//     }\n// }\n\nclass GiftsFactory {\n  constructor() {\n    this.dwarf = new Dwarf();\n    this.sled = new Sled();\n  }\n\n  getDwarf() {\n    return this.dwarf;\n  }\n\n  getSled() {\n    return this.sled;\n  }\n\n}\n\nclass Dwarf {\n  constructor() {\n    this.isWorking = false;\n  }\n\n  prepareGift(gift) {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        this.isWorking = true;\n        resolve(\"ok\");\n      }, gift.preparation_time * 1000);\n    });\n  }\n\n  addGift(sled, gift) {\n    sled.gifts.push(gift);\n  }\n\n}\n\nclass Sled {\n  constructor() {\n    this.gifts = [];\n    this.isDelivering = false;\n  }\n\n  isTooHeavy(gift) {\n    let sum = 0;\n\n    for (let i = 0; i < this.gifts.length; i++) {\n      sum += this.gifts[i].weight;\n    }\n\n    sum += gift.weight;\n\n    if (sum <= 12) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  displaySled() {\n    let str = \"\";\n\n    for (let i = 0; i < this.gifts.length; i++) {\n      str += \"<li> Gift \" + (i + 1) + \" : \" + this.gifts[i].constructor.name + \"</li>\";\n    }\n\n    return str;\n  } // deliver(){\n  //     if (!isdelivering) {\n  //         if (this.gifts.length > 0) {\n  //             isdelivering = true;\n  //             axios.post('http://localhost:8081', {\n  //                     gifts: this.gifts\n  //                 })\n  //                 .then(function () {\n  //                     this.gifts = []\n  //                     $('#Sled').html(\"\")\n  //                     $('#Result').html(\"Gifts have been delivered\")\n  //                     isdelivering = false;\n  //                 })\n  //                 .catch(function () {\n  //                     isdelivering = false;\n  //                     $('#Result').html(\"These stupids reindeers are hungry, try again !\")\n  //                 });\n  //         } else {\n  //             $('#Result').html(\"Sled empty\")\n  //         }\n  //     } else {\n  //         $('#Result').html(\"Reindeers are delivering !\")\n  //     }\n  // }\n\n\n}\n\nclass Gift {\n  constructor(weight, preparation_time) {\n    this.weight = weight;\n    this.preparation_time = preparation_time;\n  }\n\n}\n\nclass SmallGift extends Gift {\n  constructor() {\n    super(1, 0.5);\n  }\n\n}\n\nclass NormalGift extends Gift {\n  constructor() {\n    super(2, 1);\n  }\n\n}\n\nclass BigGift extends Gift {\n  constructor() {\n    super(5, 2);\n  }\n\n}\n\nconst giftFactory = type => {\n  switch (type) {\n    case \"Small\":\n      return new SmallGift();\n\n    case \"Normal\":\n      return new NormalGift();\n\n    case \"Big\":\n      return new BigGift();\n\n    default:\n      return null;\n  }\n};","map":{"version":3,"sources":["/Users/antoinemassy/Desktop/A3/TechnoWebAdv/lab3/website/src/index.js"],"names":["$","axios","require","document","ready","gf","GiftsFactory","dwarf","getDwarf","sled","getSled","click","smallGift","giftFactory","isTooHeavy","isWorking","prepareGift","addGift","console","log","err","normalGift","bigGift","constructor","Dwarf","Sled","gift","Promise","resolve","reject","setTimeout","preparation_time","gifts","push","isDelivering","sum","i","length","weight","displaySled","str","name","Gift","SmallGift","NormalGift","BigGift","type"],"mappings":"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","sourcesContent":["// you can import css in your js file!\nimport 'bootstrap/dist/css/bootstrap.css'\nimport './index.css'\n// If you want to use jquery\nimport $ from 'jquery'\nconst axios = require('axios');\n\n// TODO\n$(document).ready(function () {\n    const gf = new GiftsFactory();\n    const dwarf = gf.getDwarf();\n    const sled = gf.getSled();\n\n    $('#Small').click(async function () {\n        try{const smallGift = giftFactory(\"Small\")\n        if(!sled.isTooHeavy(smallGift) && !dwarf.isWorking){\n            dwarf.isWorking =true\n            await dwarf.prepareGift(smallGift)\n            dwarf.addGift(sled, smallGift)\n            console.log(sled)\n        }}catch(err){\n            console.log(err)\n        }\n        //giftHandler(smallGift)}\n        \n        \n    });\n\n    $('#Normal').click(function () {\n        const normalGift = giftFactory(\"Normal\")\n        //giftHandler(normalGift)\n    });\n\n\n    $('#Big').click(function () {\n        const bigGift = giftFactory(\"Big\")\n        //giftHandler(bigGift)\n    });\n\n    $('#Deliver').click(function () {\n        //deliver()\n    });\n});\n\n// async function giftHandler(gift) {\n//     if (!isworking) {\n//         if (!isdelivering) {\n//             try {\n//                 $('#Result').html(\"in work\")\n//                 isworking = true\n//                 await gift.prepareGift()\n//                 $('#Result').html(addGift(gift));\n//                 $('#Sled').html(displaySled())\n//             } catch (err) {\n//                 return err\n//             }\n//         } else {\n//             $('#Result').html('Dwarf says : the sled is not here, so why would I bother?!')\n//         }\n//     } else {\n//         $('#Result').html(\"dwarf is busy\")\n//     }\n// }\n\n\n\nclass GiftsFactory {\n    constructor() {\n        this.dwarf = new Dwarf();\n        this.sled = new Sled();\n    }\n\n    getDwarf(){\n        return this.dwarf\n    }\n\n    getSled(){\n        return this.sled\n    }\n}\n\nclass Dwarf {\n    constructor() {\n        this.isWorking = false;\n    }\n\n    prepareGift(gift) {\n        return new Promise((resolve, reject) => {\n            setTimeout(() => {\n                this.isWorking = true\n                resolve(\"ok\")\n            }, (gift.preparation_time * 1000))\n        })\n    }\n    addGift(sled, gift){\n        sled.gifts.push(gift)\n    }\n}\n\nclass Sled {\n    constructor() {\n        this.gifts = []\n        this.isDelivering =false;\n    }\n\n    isTooHeavy(gift) {\n        let sum = 0\n        for (let i = 0; i < this.gifts.length; i++) {\n            sum += this.gifts[i].weight\n        }\n        sum += gift.weight\n        if (sum <= 12) {\n            return false\n        } else {\n            return true\n        }\n    }\n\n    displaySled() {\n        let str = \"\"\n        for (let i = 0; i < this.gifts.length; i++) {\n            str += \"<li> Gift \" + (i + 1) + \" : \" + this.gifts[i].constructor.name + \"</li>\"\n        }\n        return str\n    }\n\n    // deliver(){\n    //     if (!isdelivering) {\n    //         if (this.gifts.length > 0) {\n    //             isdelivering = true;\n    //             axios.post('http://localhost:8081', {\n    //                     gifts: this.gifts\n    //                 })\n    //                 .then(function () {\n    //                     this.gifts = []\n    //                     $('#Sled').html(\"\")\n    //                     $('#Result').html(\"Gifts have been delivered\")\n    //                     isdelivering = false;\n    //                 })\n    //                 .catch(function () {\n    //                     isdelivering = false;\n    //                     $('#Result').html(\"These stupids reindeers are hungry, try again !\")\n    //                 });\n    //         } else {\n    //             $('#Result').html(\"Sled empty\")\n    //         }\n    //     } else {\n    //         $('#Result').html(\"Reindeers are delivering !\")\n    //     }\n    // }\n}\n\nclass Gift {\n    constructor(weight, preparation_time) {\n        this.weight = weight\n        this.preparation_time = preparation_time\n    }\n}\n\nclass SmallGift extends Gift {\n    constructor() {\n        super(1, 0.5)\n    }\n}\n\nclass NormalGift extends Gift {\n    constructor() {\n        super(2, 1)\n    }\n}\n\nclass BigGift extends Gift {\n    constructor() {\n        super(5, 2)\n    }\n}\nconst giftFactory = (type) => {\n    switch (type) {\n        case \"Small\":\n            return new SmallGift();\n        case \"Normal\":\n            return new NormalGift();\n        case \"Big\":\n            return new BigGift();\n        default:\n            return null;\n    }\n}"]},"metadata":{},"sourceType":"module"}