{"ast":null,"code":"// you can import css in your js file!\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css';\nimport * as g from './gift.js'; // If you want to use jquery\n\nimport $ from 'jquery';\n\nconst axios = require('axios'); // TODO\n\n\n$(document).ready(function () {\n  const gf = new GiftsFactory();\n  const dwarf = gf.getDwarf();\n  const sled = gf.getSled();\n  $('#Small').click(async function () {\n    try {\n      const smallGift = giftFactory(\"Small\");\n\n      if (!sled.isTooHeavy(smallGift) && !dwarf.getIsWorking()) {\n        dwarf.setIsWorking(true);\n        await dwarf.prepareGift(smallGift);\n        dwarf.addGift(sled, smallGift);\n        console.log(sled);\n      }\n    } catch (err) {\n      console.log(err);\n    } //giftHandler(smallGift)}\n\n  });\n  $('#Normal').click(function () {\n    const normalGift = giftFactory(\"Normal\"); //giftHandler(normalGift)\n  });\n  $('#Big').click(function () {\n    const bigGift = giftFactory(\"Big\"); //giftHandler(bigGift)\n  });\n  $('#Deliver').click(function () {//deliver()\n  });\n}); // async function giftHandler(gift) {\n//     if (!isworking) {\n//         if (!isdelivering) {\n//             try {\n//                 $('#Result').html(\"in work\")\n//                 isworking = true\n//                 await gift.prepareGift()\n//                 $('#Result').html(addGift(gift));\n//                 $('#Sled').html(displaySled())\n//             } catch (err) {\n//                 return err\n//             }\n//         } else {\n//             $('#Result').html('Dwarf says : the sled is not here, so why would I bother?!')\n//         }\n//     } else {\n//         $('#Result').html(\"dwarf is busy\")\n//     }\n// }\n\nclass GiftsFactory {\n  constructor() {\n    this.dwarf = new Dwarf();\n    this.sled = new Sled();\n  }\n\n  getDwarf() {\n    return this.dwarf;\n  }\n\n  getSled() {\n    return this.sled;\n  }\n\n}\n\nclass Dwarf {\n  constructor() {\n    this.isWorking = false;\n  }\n\n  getIsWorking() {\n    return this.isWorking;\n  }\n\n  setIsWorking(boolean) {\n    this.isWorking = boolean;\n  }\n\n  prepareGift(gift) {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        this.isWorking = false;\n        resolve(\"ok\");\n      }, gift.preparation_time * 1000);\n    });\n  }\n\n  addGift(sled, gift) {\n    sled.gifts.push(gift);\n  }\n\n}\n\nclass Sled {\n  constructor() {\n    this.gifts = [];\n    this.isDelivering = false;\n  }\n\n  isTooHeavy(gift) {\n    let sum = 0;\n\n    for (let i = 0; i < this.gifts.length; i++) {\n      sum += this.gifts[i].weight;\n    }\n\n    sum += gift.weight;\n\n    if (sum <= 12) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  displaySled() {\n    let str = \"\";\n\n    for (let i = 0; i < this.gifts.length; i++) {\n      str += \"<li> Gift \" + (i + 1) + \" : \" + this.gifts[i].constructor.name + \"</li>\";\n    }\n\n    return str;\n  } // deliver(){\n  //     if (!isdelivering) {\n  //         if (this.gifts.length > 0) {\n  //             isdelivering = true;\n  //             axios.post('http://localhost:8081', {\n  //                     gifts: this.gifts\n  //                 })\n  //                 .then(function () {\n  //                     this.gifts = []\n  //                     $('#Sled').html(\"\")\n  //                     $('#Result').html(\"Gifts have been delivered\")\n  //                     isdelivering = false;\n  //                 })\n  //                 .catch(function () {\n  //                     isdelivering = false;\n  //                     $('#Result').html(\"These stupids reindeers are hungry, try again !\")\n  //                 });\n  //         } else {\n  //             $('#Result').html(\"Sled empty\")\n  //         }\n  //     } else {\n  //         $('#Result').html(\"Reindeers are delivering !\")\n  //     }\n  // }\n\n\n}\n\nconst giftFactory = type => {\n  switch (type) {\n    case \"Small\":\n      return new SmallGift();\n\n    case \"Normal\":\n      return new NormalGift();\n\n    case \"Big\":\n      return new BigGift();\n\n    default:\n      return null;\n  }\n};","map":{"version":3,"sources":["/Users/antoinemassy/Desktop/A3/TechnoWebAdv/lab3/website/src/index.js"],"names":["g","$","axios","require","document","ready","gf","GiftsFactory","dwarf","getDwarf","sled","getSled","click","smallGift","giftFactory","isTooHeavy","getIsWorking","setIsWorking","prepareGift","addGift","console","log","err","normalGift","bigGift","constructor","Dwarf","Sled","isWorking","boolean","gift","Promise","resolve","reject","setTimeout","preparation_time","gifts","push","isDelivering","sum","i","length","weight","displaySled","str","name","type","SmallGift","NormalGift","BigGift"],"mappings":"AAAA;AACA,OAAO,kCAAP;AACA,OAAO,aAAP;AACA,OAAO,KAAKA,CAAZ,MAAmB,WAAnB,C,CACA;;AACA,OAAOC,CAAP,MAAc,QAAd;;AACA,MAAMC,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB,C,CAEA;;;AACAF,CAAC,CAACG,QAAD,CAAD,CAAYC,KAAZ,CAAkB,YAAY;AAC1B,QAAMC,EAAE,GAAG,IAAIC,YAAJ,EAAX;AACA,QAAMC,KAAK,GAAGF,EAAE,CAACG,QAAH,EAAd;AACA,QAAMC,IAAI,GAAGJ,EAAE,CAACK,OAAH,EAAb;AAEAV,EAAAA,CAAC,CAAC,QAAD,CAAD,CAAYW,KAAZ,CAAkB,kBAAkB;AAChC,QAAI;AACA,YAAMC,SAAS,GAAGC,WAAW,CAAC,OAAD,CAA7B;;AACA,UAAI,CAACJ,IAAI,CAACK,UAAL,CAAgBF,SAAhB,CAAD,IAA+B,CAACL,KAAK,CAACQ,YAAN,EAApC,EAA0D;AACtDR,QAAAA,KAAK,CAACS,YAAN,CAAmB,IAAnB;AACA,cAAMT,KAAK,CAACU,WAAN,CAAkBL,SAAlB,CAAN;AACAL,QAAAA,KAAK,CAACW,OAAN,CAAcT,IAAd,EAAoBG,SAApB;AACAO,QAAAA,OAAO,CAACC,GAAR,CAAYX,IAAZ;AACH;AACJ,KARD,CAQE,OAAOY,GAAP,EAAY;AACVF,MAAAA,OAAO,CAACC,GAAR,CAAYC,GAAZ;AACH,KAX+B,CAYhC;;AAGH,GAfD;AAiBArB,EAAAA,CAAC,CAAC,SAAD,CAAD,CAAaW,KAAb,CAAmB,YAAY;AAC3B,UAAMW,UAAU,GAAGT,WAAW,CAAC,QAAD,CAA9B,CAD2B,CAE3B;AACH,GAHD;AAMAb,EAAAA,CAAC,CAAC,MAAD,CAAD,CAAUW,KAAV,CAAgB,YAAY;AACxB,UAAMY,OAAO,GAAGV,WAAW,CAAC,KAAD,CAA3B,CADwB,CAExB;AACH,GAHD;AAKAb,EAAAA,CAAC,CAAC,UAAD,CAAD,CAAcW,KAAd,CAAoB,YAAY,CAC5B;AACH,GAFD;AAGH,CApCD,E,CAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIA,MAAML,YAAN,CAAmB;AACfkB,EAAAA,WAAW,GAAG;AACV,SAAKjB,KAAL,GAAa,IAAIkB,KAAJ,EAAb;AACA,SAAKhB,IAAL,GAAY,IAAIiB,IAAJ,EAAZ;AACH;;AAEDlB,EAAAA,QAAQ,GAAG;AACP,WAAO,KAAKD,KAAZ;AACH;;AAEDG,EAAAA,OAAO,GAAG;AACN,WAAO,KAAKD,IAAZ;AACH;;AAZc;;AAenB,MAAMgB,KAAN,CAAY;AACRD,EAAAA,WAAW,GAAG;AACV,SAAKG,SAAL,GAAiB,KAAjB;AACH;;AACDZ,EAAAA,YAAY,GAAG;AACX,WAAO,KAAKY,SAAZ;AACH;;AACDX,EAAAA,YAAY,CAACY,OAAD,EAAU;AAClB,SAAKD,SAAL,GAAiBC,OAAjB;AACH;;AACDX,EAAAA,WAAW,CAACY,IAAD,EAAO;AACd,WAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpCC,MAAAA,UAAU,CAAC,MAAM;AACb,aAAKN,SAAL,GAAiB,KAAjB;AACAI,QAAAA,OAAO,CAAC,IAAD,CAAP;AACH,OAHS,EAGNF,IAAI,CAACK,gBAAL,GAAwB,IAHlB,CAAV;AAIH,KALM,CAAP;AAMH;;AACDhB,EAAAA,OAAO,CAACT,IAAD,EAAOoB,IAAP,EAAa;AAChBpB,IAAAA,IAAI,CAAC0B,KAAL,CAAWC,IAAX,CAAgBP,IAAhB;AACH;;AApBO;;AAuBZ,MAAMH,IAAN,CAAW;AACPF,EAAAA,WAAW,GAAG;AACV,SAAKW,KAAL,GAAa,EAAb;AACA,SAAKE,YAAL,GAAoB,KAApB;AACH;;AAEDvB,EAAAA,UAAU,CAACe,IAAD,EAAO;AACb,QAAIS,GAAG,GAAG,CAAV;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKJ,KAAL,CAAWK,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;AACxCD,MAAAA,GAAG,IAAI,KAAKH,KAAL,CAAWI,CAAX,EAAcE,MAArB;AACH;;AACDH,IAAAA,GAAG,IAAIT,IAAI,CAACY,MAAZ;;AACA,QAAIH,GAAG,IAAI,EAAX,EAAe;AACX,aAAO,KAAP;AACH,KAFD,MAEO;AACH,aAAO,IAAP;AACH;AACJ;;AAEDI,EAAAA,WAAW,GAAG;AACV,QAAIC,GAAG,GAAG,EAAV;;AACA,SAAK,IAAIJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKJ,KAAL,CAAWK,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;AACxCI,MAAAA,GAAG,IAAI,gBAAgBJ,CAAC,GAAG,CAApB,IAAyB,KAAzB,GAAiC,KAAKJ,KAAL,CAAWI,CAAX,EAAcf,WAAd,CAA0BoB,IAA3D,GAAkE,OAAzE;AACH;;AACD,WAAOD,GAAP;AACH,GAzBM,CA2BP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAlDO;;AAsDX,MAAM9B,WAAW,GAAIgC,IAAD,IAAU;AAC1B,UAAQA,IAAR;AACI,SAAK,OAAL;AACI,aAAO,IAAIC,SAAJ,EAAP;;AACJ,SAAK,QAAL;AACI,aAAO,IAAIC,UAAJ,EAAP;;AACJ,SAAK,KAAL;AACI,aAAO,IAAIC,OAAJ,EAAP;;AACJ;AACI,aAAO,IAAP;AARR;AAUH,CAXD","sourcesContent":["// you can import css in your js file!\nimport 'bootstrap/dist/css/bootstrap.css'\nimport './index.css'\nimport * as g from './gift.js'\n// If you want to use jquery\nimport $ from 'jquery'\nconst axios = require('axios');\n\n// TODO\n$(document).ready(function () {\n    const gf = new GiftsFactory();\n    const dwarf = gf.getDwarf();\n    const sled = gf.getSled();\n\n    $('#Small').click(async function () {\n        try {\n            const smallGift = giftFactory(\"Small\")\n            if (!sled.isTooHeavy(smallGift) && !dwarf.getIsWorking()) {\n                dwarf.setIsWorking(true)\n                await dwarf.prepareGift(smallGift)\n                dwarf.addGift(sled, smallGift)\n                console.log(sled)\n            }\n        } catch (err) {\n            console.log(err)\n        }\n        //giftHandler(smallGift)}\n\n\n    });\n\n    $('#Normal').click(function () {\n        const normalGift = giftFactory(\"Normal\")\n        //giftHandler(normalGift)\n    });\n\n\n    $('#Big').click(function () {\n        const bigGift = giftFactory(\"Big\")\n        //giftHandler(bigGift)\n    });\n\n    $('#Deliver').click(function () {\n        //deliver()\n    });\n});\n\n// async function giftHandler(gift) {\n//     if (!isworking) {\n//         if (!isdelivering) {\n//             try {\n//                 $('#Result').html(\"in work\")\n//                 isworking = true\n//                 await gift.prepareGift()\n//                 $('#Result').html(addGift(gift));\n//                 $('#Sled').html(displaySled())\n//             } catch (err) {\n//                 return err\n//             }\n//         } else {\n//             $('#Result').html('Dwarf says : the sled is not here, so why would I bother?!')\n//         }\n//     } else {\n//         $('#Result').html(\"dwarf is busy\")\n//     }\n// }\n\n\n\nclass GiftsFactory {\n    constructor() {\n        this.dwarf = new Dwarf();\n        this.sled = new Sled();\n    }\n\n    getDwarf() {\n        return this.dwarf\n    }\n\n    getSled() {\n        return this.sled\n    }\n}\n\nclass Dwarf {\n    constructor() {\n        this.isWorking = false;\n    }\n    getIsWorking() {\n        return this.isWorking\n    }\n    setIsWorking(boolean) {\n        this.isWorking = boolean\n    }\n    prepareGift(gift) {\n        return new Promise((resolve, reject) => {\n            setTimeout(() => {\n                this.isWorking = false\n                resolve(\"ok\")\n            }, (gift.preparation_time * 1000))\n        })\n    }\n    addGift(sled, gift) {\n        sled.gifts.push(gift)\n    }\n}\n\nclass Sled {\n    constructor() {\n        this.gifts = []\n        this.isDelivering = false;\n    }\n\n    isTooHeavy(gift) {\n        let sum = 0\n        for (let i = 0; i < this.gifts.length; i++) {\n            sum += this.gifts[i].weight\n        }\n        sum += gift.weight\n        if (sum <= 12) {\n            return false\n        } else {\n            return true\n        }\n    }\n\n    displaySled() {\n        let str = \"\"\n        for (let i = 0; i < this.gifts.length; i++) {\n            str += \"<li> Gift \" + (i + 1) + \" : \" + this.gifts[i].constructor.name + \"</li>\"\n        }\n        return str\n    }\n\n    // deliver(){\n    //     if (!isdelivering) {\n    //         if (this.gifts.length > 0) {\n    //             isdelivering = true;\n    //             axios.post('http://localhost:8081', {\n    //                     gifts: this.gifts\n    //                 })\n    //                 .then(function () {\n    //                     this.gifts = []\n    //                     $('#Sled').html(\"\")\n    //                     $('#Result').html(\"Gifts have been delivered\")\n    //                     isdelivering = false;\n    //                 })\n    //                 .catch(function () {\n    //                     isdelivering = false;\n    //                     $('#Result').html(\"These stupids reindeers are hungry, try again !\")\n    //                 });\n    //         } else {\n    //             $('#Result').html(\"Sled empty\")\n    //         }\n    //     } else {\n    //         $('#Result').html(\"Reindeers are delivering !\")\n    //     }\n    // }\n}\n\n\nconst giftFactory = (type) => {\n    switch (type) {\n        case \"Small\":\n            return new SmallGift();\n        case \"Normal\":\n            return new NormalGift();\n        case \"Big\":\n            return new BigGift();\n        default:\n            return null;\n    }\n}"]},"metadata":{},"sourceType":"module"}