{"ast":null,"code":"import { giftFactory } from './gift.js';\nexport class Dwarf {\n  constructor() {\n    this.isWorking = false;\n  }\n\n  getIsWorking() {\n    return this.isWorking;\n  }\n\n  setIsWorking(boolean) {\n    this.isWorking = boolean;\n  }\n\n  prepareGift(gift) {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        this.isWorking = false;\n        resolve(\"ok\");\n      }, gift.preparation_time * 1000);\n    });\n  }\n\n  async createGift(type, sled) {\n    const gift = giftFactory(type);\n\n    if (sled.isTooHeavy(gift)) {\n      return \"Sled too Heavy\";\n    } else {\n      if (sled.isDelivering) {\n        return 'Dwarf says : the sled is not here, so why would I bother?!';\n      } else {\n        try {\n          if (!this.isWorking) {\n            this.isWorking = true;\n            await this.prepareGift(gift);\n            sled.gifts.push(gift);\n          } else {\n            return \"Dwarf is working\";\n          }\n        } catch (err) {\n          return err;\n        }\n      }\n    }\n\n    return \"okkk\";\n  }\n\n}","map":{"version":3,"sources":["/Users/antoinemassy/Desktop/A3/TechnoWebAdv/lab3/website/src/dwarf.js"],"names":["giftFactory","Dwarf","constructor","isWorking","getIsWorking","setIsWorking","boolean","prepareGift","gift","Promise","resolve","reject","setTimeout","preparation_time","createGift","type","sled","isTooHeavy","isDelivering","gifts","push","err"],"mappings":"AAAA,SACIA,WADJ,QAEO,WAFP;AAIA,OAAO,MAAMC,KAAN,CAAY;AACfC,EAAAA,WAAW,GAAG;AACV,SAAKC,SAAL,GAAiB,KAAjB;AACH;;AACDC,EAAAA,YAAY,GAAG;AACX,WAAO,KAAKD,SAAZ;AACH;;AACDE,EAAAA,YAAY,CAACC,OAAD,EAAU;AAClB,SAAKH,SAAL,GAAiBG,OAAjB;AACH;;AACDC,EAAAA,WAAW,CAACC,IAAD,EAAO;AACd,WAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpCC,MAAAA,UAAU,CAAC,MAAM;AACb,aAAKT,SAAL,GAAiB,KAAjB;AACAO,QAAAA,OAAO,CAAC,IAAD,CAAP;AACH,OAHS,EAGNF,IAAI,CAACK,gBAAL,GAAwB,IAHlB,CAAV;AAIH,KALM,CAAP;AAMH;;AAED,QAAMC,UAAN,CAAiBC,IAAjB,EAAuBC,IAAvB,EAA6B;AACzB,UAAMR,IAAI,GAAGR,WAAW,CAACe,IAAD,CAAxB;;AACA,QAAIC,IAAI,CAACC,UAAL,CAAgBT,IAAhB,CAAJ,EAA2B;AACvB,aAAO,gBAAP;AACH,KAFD,MAEO;AACH,UAAIQ,IAAI,CAACE,YAAT,EAAuB;AACnB,eAAO,4DAAP;AACH,OAFD,MAEO;AACH,YAAI;AACA,cAAI,CAAC,KAAKf,SAAV,EAAqB;AACjB,iBAAKA,SAAL,GAAgB,IAAhB;AACA,kBAAM,KAAKI,WAAL,CAAiBC,IAAjB,CAAN;AACAQ,YAAAA,IAAI,CAACG,KAAL,CAAWC,IAAX,CAAgBZ,IAAhB;AACH,WAJD,MAIO;AACH,mBAAO,kBAAP;AACH;AACJ,SARD,CAQE,OAAOa,GAAP,EAAY;AACV,iBAAOA,GAAP;AACH;AACJ;AACJ;;AACD,WAAO,MAAP;AACH;;AAzCc","sourcesContent":["import {\n    giftFactory\n} from './gift.js'\n\nexport class Dwarf {\n    constructor() {\n        this.isWorking = false;\n    }\n    getIsWorking() {\n        return this.isWorking\n    }\n    setIsWorking(boolean) {\n        this.isWorking = boolean\n    }\n    prepareGift(gift) {\n        return new Promise((resolve, reject) => {\n            setTimeout(() => {\n                this.isWorking = false\n                resolve(\"ok\")\n            }, (gift.preparation_time * 1000))\n        })\n    }\n    \n    async createGift(type, sled) {\n        const gift = giftFactory(type)\n        if (sled.isTooHeavy(gift)) {\n            return \"Sled too Heavy\"\n        } else {\n            if (sled.isDelivering) {\n                return 'Dwarf says : the sled is not here, so why would I bother?!'\n            } else {\n                try {\n                    if (!this.isWorking) {\n                        this.isWorking =true\n                        await this.prepareGift(gift)\n                        sled.gifts.push(gift)\n                    } else {\n                        return \"Dwarf is working\"\n                    }\n                } catch (err) {\n                    return err\n                }\n            }\n        }\n        return \"okkk\"\n    }\n}"]},"metadata":{},"sourceType":"module"}