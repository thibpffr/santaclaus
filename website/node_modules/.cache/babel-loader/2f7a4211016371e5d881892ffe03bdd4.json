{"ast":null,"code":"// you can import css in your js file!\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css'; // If you want to use jquery\n\nimport $ from 'jquery';\n\nconst axios = require('axios'); // TODO\n\n\nlet sled = [];\nlet isworking = false;\nlet isdelivering = false;\n$(document).ready(function () {\n  console.log(\"testetstetstst\");\n  $('#Small').click(function () {\n    const smallGift = giftFactory(\"Small\"); //giftHandler(smallGift)\n  });\n  $('#Normal').click(function () {\n    const normalGift = giftFactory(\"Normal\"); //giftHandler(normalGift)\n  });\n  $('#Big').click(function () {\n    const bigGift = giftFactory(\"Big\"); //giftHandler(bigGift)\n  });\n  $('#Deliver').click(function () {\n    deliver();\n  });\n}); // async function giftHandler(gift) {\n//     if (!isworking) {\n//         if (!isdelivering) {\n//             try {\n//                 $('#Result').html(\"in work\")\n//                 isworking = true\n//                 await gift.prepareGift()\n//                 $('#Result').html(addGift(gift));\n//                 $('#Sled').html(displaySled())\n//             } catch (err) {\n//                 return err\n//             }\n//         } else {\n//             $('#Result').html('Dwarf says : the sled is not here, so why would I bother?!')\n//         }\n//     } else {\n//         $('#Result').html(\"dwarf is busy\")\n//     }\n// }\n\nclass GiftsFactory {\n  constructor() {\n    this.dwarf = new Dwarf();\n    this.sled = new Sled();\n  }\n\n}\n\nclass Dwarf {\n  constructor() {\n    isWorking = false;\n  }\n\n  prepareGift(gift) {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        this.isWorking = false;\n        resolve(\"ok\");\n      }, gift.preparation_time * 1000);\n    });\n  }\n\n  addGift(sled, gift) {\n    sled.push(gift);\n  }\n\n}\n\nclass Sled {\n  constructor() {\n    this.gifts = [];\n    this.isDelivering = false;\n  }\n\n  isTooHeavy(gift) {\n    let sum = 0;\n\n    for (let i = 0; i < this.gifts.length; i++) {\n      sum += this.gifts[i].weight;\n    }\n\n    sum += gift.weight;\n\n    if (sum <= 12) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  displaySled() {\n    let str = \"\";\n\n    for (let i = 0; i < sled.length; i++) {\n      str += \"<li> Gift \" + (i + 1) + \" : \" + sled[i].constructor.name + \"</li>\";\n    }\n\n    return str;\n  }\n\n  deliver() {\n    if (!isdelivering) {\n      if (this.gifts.length > 0) {\n        isdelivering = true;\n        axios.post('http://localhost:8081', {\n          gifts: this.gifts\n        }).then(function () {\n          this.gifts = [];\n          $('#Sled').html(\"\");\n          $('#Result').html(\"Gifts have been delivered\");\n          isdelivering = false;\n        }).catch(function () {\n          isdelivering = false;\n          $('#Result').html(\"These stupids reindeers are hungry, try again !\");\n        });\n      } else {\n        $('#Result').html(\"Sled empty\");\n      }\n    } else {\n      $('#Result').html(\"Reindeers are delivering !\");\n    }\n  }\n\n}\n\nclass Gift {\n  constructor(weight, preparation_time) {\n    this.weight = weight;\n    this.preparation_time = preparation_time;\n  }\n\n}\n\nclass SmallGift extends Gift {\n  constructor() {\n    super(1, 0.5);\n  }\n\n}\n\nclass NormalGift extends Gift {\n  constructor() {\n    super(2, 1);\n  }\n\n}\n\nclass BigGift extends Gift {\n  constructor() {\n    super(5, 2);\n  }\n\n}\n\nconst giftFactory = type => {\n  switch (type) {\n    case \"Small\":\n      return new SmallGift();\n\n    case \"Normal\":\n      return new NormalGift();\n\n    case \"Big\":\n      return new BigGift();\n\n    default:\n      return null;\n  }\n};","map":{"version":3,"sources":["/Users/antoinemassy/Desktop/A3/TechnoWebAdv/lab3/website/src/index.js"],"names":["$","axios","require","sled","isworking","isdelivering","document","ready","console","log","click","smallGift","giftFactory","normalGift","bigGift","deliver","GiftsFactory","constructor","dwarf","Dwarf","Sled","isWorking","prepareGift","gift","Promise","resolve","reject","setTimeout","preparation_time","addGift","push","gifts","isDelivering","isTooHeavy","sum","i","length","weight","displaySled","str","name","post","then","html","catch","Gift","SmallGift","NormalGift","BigGift","type"],"mappings":"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","sourcesContent":["// you can import css in your js file!\nimport 'bootstrap/dist/css/bootstrap.css'\nimport './index.css'\n// If you want to use jquery\nimport $ from 'jquery'\nconst axios = require('axios');\n\n// TODO\nlet sled = []\nlet isworking = false;\nlet isdelivering = false;\n\n$(document).ready(function () {\n    console.log(\"testetstetstst\")\n    $('#Small').click(function () {\n        const smallGift = giftFactory(\"Small\")\n        //giftHandler(smallGift)\n    });\n\n    $('#Normal').click(function () {\n        const normalGift = giftFactory(\"Normal\")\n        //giftHandler(normalGift)\n    });\n\n\n    $('#Big').click(function () {\n        const bigGift = giftFactory(\"Big\")\n        //giftHandler(bigGift)\n    });\n\n    $('#Deliver').click(function () {\n        deliver()\n    });\n});\n\n// async function giftHandler(gift) {\n//     if (!isworking) {\n//         if (!isdelivering) {\n//             try {\n//                 $('#Result').html(\"in work\")\n//                 isworking = true\n//                 await gift.prepareGift()\n//                 $('#Result').html(addGift(gift));\n//                 $('#Sled').html(displaySled())\n//             } catch (err) {\n//                 return err\n//             }\n//         } else {\n//             $('#Result').html('Dwarf says : the sled is not here, so why would I bother?!')\n//         }\n//     } else {\n//         $('#Result').html(\"dwarf is busy\")\n//     }\n// }\n\n\n\nclass GiftsFactory {\n    constructor() {\n        this.dwarf = new Dwarf();\n        this.sled = new Sled();\n    }\n}\n\nclass Dwarf {\n    constructor() {\n        isWorking = false;\n    }\n\n    prepareGift(gift) {\n        return new Promise((resolve, reject) => {\n            setTimeout(() => {\n                this.isWorking = false\n                resolve(\"ok\")\n            }, (gift.preparation_time * 1000))\n        })\n    }\n    addGift(sled, gift){\n        sled.push(gift)\n    }\n}\n\nclass Sled {\n    constructor() {\n        this.gifts = []\n        this.isDelivering =false;\n    }\n\n    isTooHeavy(gift) {\n        let sum = 0\n        for (let i = 0; i < this.gifts.length; i++) {\n            sum += this.gifts[i].weight\n        }\n        sum += gift.weight\n        if (sum <= 12) {\n            return false\n        } else {\n            return true\n        }\n    }\n\n    displaySled() {\n        let str = \"\"\n        for (let i = 0; i < sled.length; i++) {\n            str += \"<li> Gift \" + (i + 1) + \" : \" + sled[i].constructor.name + \"</li>\"\n        }\n        return str\n    }\n\n    deliver(){\n        if (!isdelivering) {\n            if (this.gifts.length > 0) {\n                isdelivering = true;\n                axios.post('http://localhost:8081', {\n                        gifts: this.gifts\n                    })\n                    .then(function () {\n                        this.gifts = []\n                        $('#Sled').html(\"\")\n                        $('#Result').html(\"Gifts have been delivered\")\n                        isdelivering = false;\n                    })\n                    .catch(function () {\n                        isdelivering = false;\n                        $('#Result').html(\"These stupids reindeers are hungry, try again !\")\n                    });\n            } else {\n                $('#Result').html(\"Sled empty\")\n            }\n        } else {\n            $('#Result').html(\"Reindeers are delivering !\")\n        }\n    }\n}\n\nclass Gift {\n    constructor(weight, preparation_time) {\n        this.weight = weight\n        this.preparation_time = preparation_time\n    }\n}\n\nclass SmallGift extends Gift {\n    constructor() {\n        super(1, 0.5)\n    }\n}\n\nclass NormalGift extends Gift {\n    constructor() {\n        super(2, 1)\n    }\n}\n\nclass BigGift extends Gift {\n    constructor() {\n        super(5, 2)\n    }\n}\nconst giftFactory = (type) => {\n    switch (type) {\n        case \"Small\":\n            return new SmallGift();\n        case \"Normal\":\n            return new NormalGift();\n        case \"Big\":\n            return new BigGift();\n        default:\n            return null;\n    }\n}"]},"metadata":{},"sourceType":"module"}